-- RAFEEYL Auto Teleport (Waypoint Permanen Manual + Auto Respawn Loop)

local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- ðŸ‘‡ Masukkan waypoint hasil salin clipboard ke sini (nama + posisi)
local waypoints = {
    {name = "Gunung Cicok", pos = Vector3.new(123.45, 67.89, 101.23)},
    {name = "Puncak Lava", pos = Vector3.new(150.12, 80.77, 90.55)},
    {name = "Summit Salju", pos = Vector3.new(180.77, 92.15, 75.32)}
}

-- ðŸ§© Setting awal
local running = false
local autoRespawn = true  -- aktifkan auto respawn loop
local delaySeconds = 5
local loopCoroutine
local respawnLoop

-- Helper
local function getHRP()
    local c = player.Character
    if not c then return nil end
    return c:FindFirstChild("HumanoidRootPart")
end

local function teleportTo(pos)
    local hrp = getHRP()
    if hrp then
        hrp.CFrame = CFrame.new(pos + Vector3.new(0,3,0))
    end
end

local function startAutoRespawn()
    if respawnLoop then return end
    respawnLoop = coroutine.create(function()
        while autoRespawn do
            player:LoadCharacter()
            Rayfield:Notify({
                Title = "Auto Respawn",
                Content = "Respawn otomatis dijalankan.",
                Duration = 1.5
            })
            task.wait(delaySeconds)
        end
    end)
    coroutine.resume(respawnLoop)
end

local function stopAutoRespawn()
    autoRespawn = false
    respawnLoop = nil
end

local function startLoop()
    if running or #waypoints == 0 then
        warn("[RAFEEYL] Tidak ada waypoint permanen!")
        return
    end
    running = true

    if autoRespawn then
        startAutoRespawn() -- langsung aktifkan loop respawn
    end

    loopCoroutine = coroutine.create(function()
        local idx = 1
        while running do
            local wp = waypoints[idx]
            teleportTo(wp.pos)
            Rayfield:Notify({
                Title = "Teleporting...",
                Content = "Menuju lokasi: " .. wp.name,
                Duration = 2
            })
            idx += 1
            if idx > #waypoints then idx = 1 end
            task.wait(delaySeconds)
        end
    end)
    coroutine.resume(loopCoroutine)
end

-- GUI
local Window = Rayfield:CreateWindow({
    Name = "RAFEEYL - Auto Teleport",
    LoadingTitle = "RAFEEYL",
    LoadingSubtitle = "Permanent Summit Version"
})

local Tab = Window:CreateTab("Teleport", 4483362458)

Tab:CreateButton({
    Name = "Start",
    Callback = function()
        running = true
        autoRespawn = true
        startLoop()
        Rayfield:Notify({
            Title="Started",
            Content="Auto Teleport + Auto Respawn aktif terus.",
            Duration=2
        })
    end
})

Tab:CreateButton({
    Name = "Stop",
    Callback = function()
        running = false
        stopAutoRespawn()
        Rayfield:Notify({
            Title="Stopped",
            Content="Auto Teleport & Respawn dihentikan.",
            Duration=2
        })
    end
})

-- ðŸ”˜ Tombol teleport manual
for i, wp in ipairs(waypoints) do
    Tab:CreateButton({
        Name = "Teleport ke: " .. wp.name,
        Callback = function()
            teleportTo(wp.pos)
            Rayfield:Notify({
                Title = "Teleport Manual",
                Content = "Berhasil teleport ke: " .. wp.name,
                Duration = 2
            })
        end
    })
end
