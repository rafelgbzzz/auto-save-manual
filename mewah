local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

local keyInput = script.Parent:WaitForChild("KeyInputTextBox") -- Pastikan ada TextBox dengan nama ini di UI
local verifyButton = script.Parent:WaitForChild("VerifyButton") -- Tombol verifikasi
local statusLabel = script.Parent:WaitForChild("StatusLabel") -- Label status validasi
local mainGui = script.Parent -- UI utama

local validKeys = {
    ["ZEROKAGE123"] = true,
    ["ZEROKAGE456"] = true
}

local isKeyValid = false

local usersList = {}

-- Fungsi untuk verifikasi key
local function verifyKey(inputKey)
    if validKeys[inputKey] then
        isKeyValid = true
        statusLabel.Text = "Key valid! Akses diberikan."
        usersList[player.Name] = true
        print(player.Name .. " menggunakan UI/script dengan key valid.")
        -- Bisa ditambah pengiriman data user ke server via HttpService di sini
    else
        isKeyValid = false
        statusLabel.Text = "Key tidak valid. Coba lagi."
    end
end

-- Event klik tombol verifikasi
verifyButton.MouseButton1Click:Connect(function()
    local inputKey = keyInput.Text
    verifyKey(inputKey)
end)

-- Shortcut tombol keyboard 'E' untuk toggle visibilitas UI
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.UserInputType == Enum.UserInputType.Keyboard then
        if input.KeyCode == Enum.KeyCode.E then
            mainGui.Visible = not mainGui.Visible
        end
    end
end)

-- Fungsi menampilkan pengguna aktif
local function showActiveUsers()
    print("Pengguna aktif yang memakai UI/script:")
    for userName, _ in pairs(usersList) do
        print(userName)
    end
end

return {
    ShowActiveUsers = showActiveUsers,
    IsKeyValid = function() return isKeyValid end
}
